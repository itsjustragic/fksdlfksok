<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Report Evil - Charlie Kirk Memorial</title>
    <link rel="icon" type="image/png" href="/static/logo.png">    
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <header class="header">
        <div class="header-container">
            <h1>WE ARE CHARLIE KIRK</h1>
            <nav>
                <ul>
                    <li><a href="/">Home</a></li>
                    <li><a href="/report">Report</a></li>
                    <li><a href="/reports">Reports</a></li>
                </ul>
            </nav>
        </div>
    </header>
    <section class="report-section">
        <div class="report-header">
            <h2>REPORT EVIL</h2>
            <p>Submit evidence of individuals who celebrated Charlie Kirk's death. All submissions are confidential and reviewed by our team.</p>
        </div>

        <!-- ---------- NEW: Search + State Filter Controls ---------- -->
        <div class="reports-controls" aria-label="report filters">
            <div class="controls-inner">
                <label for="reports-search" class="visually-hidden">Search reports</label>
                <input id="reports-search" type="search" placeholder="Search reports (name, platform, description, location)">

                <label for="reports-state" class="visually-hidden">Filter by state</label>
                <select id="reports-state" aria-label="Filter by state">
                    <option value="ALL">All States / Locations</option>
                    <option value="AL">Alabama (AL)</option>
                    <option value="AK">Alaska (AK)</option>
                    <option value="AZ">Arizona (AZ)</option>
                    <option value="AR">Arkansas (AR)</option>
                    <option value="CA">California (CA)</option>
                    <option value="CO">Colorado (CO)</option>
                    <option value="CT">Connecticut (CT)</option>
                    <option value="DE">Delaware (DE)</option>
                    <option value="FL">Florida (FL)</option>
                    <option value="GA">Georgia (GA)</option>
                    <option value="HI">Hawaii (HI)</option>
                    <option value="ID">Idaho (ID)</option>
                    <option value="IL">Illinois (IL)</option>
                    <option value="IN">Indiana (IN)</option>
                    <option value="IA">Iowa (IA)</option>
                    <option value="KS">Kansas (KS)</option>
                    <option value="KY">Kentucky (KY)</option>
                    <option value="LA">Louisiana (LA)</option>
                    <option value="ME">Maine (ME)</option>
                    <option value="MD">Maryland (MD)</option>
                    <option value="MA">Massachusetts (MA)</option>
                    <option value="MI">Michigan (MI)</option>
                    <option value="MN">Minnesota (MN)</option>
                    <option value="MS">Mississippi (MS)</option>
                    <option value="MO">Missouri (MO)</option>
                    <option value="MT">Montana (MT)</option>
                    <option value="NE">Nebraska (NE)</option>
                    <option value="NV">Nevada (NV)</option>
                    <option value="NH">New Hampshire (NH)</option>
                    <option value="NJ">New Jersey (NJ)</option>
                    <option value="NM">New Mexico (NM)</option>
                    <option value="NY">New York (NY)</option>
                    <option value="NC">North Carolina (NC)</option>
                    <option value="ND">North Dakota (ND)</option>
                    <option value="OH">Ohio (OH)</option>
                    <option value="OK">Oklahoma (OK)</option>
                    <option value="OR">Oregon (OR)</option>
                    <option value="PA">Pennsylvania (PA)</option>
                    <option value="RI">Rhode Island (RI)</option>
                    <option value="SC">South Carolina (SC)</option>
                    <option value="SD">South Dakota (SD)</option>
                    <option value="TN">Tennessee (TN)</option>
                    <option value="TX">Texas (TX)</option>
                    <option value="UT">Utah (UT)</option>
                    <option value="VT">Vermont (VT)</option>
                    <option value="VA">Virginia (VA)</option>
                    <option value="WA">Washington (WA)</option>
                    <option value="WV">West Virginia (WV)</option>
                    <option value="WI">Wisconsin (WI)</option>
                    <option value="WY">Wyoming (WY)</option>
                    <option value="DC">District of Columbia (DC)</option>
                    <option value="PR">Puerto Rico (PR)</option>
                    <option value="INTL">International / Other</option>
                </select>
            </div>
            <div id="reports-no-results" class="no-results" style="display:none;">No reports match your filters.</div>
        </div>
        <!-- ---------- END: Search + State Filter Controls ---------- -->

        <form id="report-form">
            <h3>SUBJECT INFORMATION</h3>
            <label>Full Name *</label>
            <input type="text" name="full_name" required>
            <label>Location (optional)</label>
            <input type="text" name="location" placeholder="City, State/Country">
            <label>Occupation</label>
            <input type="text" name="occupation">
            <label>Employer</label>
            <input type="text" name="employer" required>
            <label>Address (optional)</label>
            <input type="text" name="address">
            <label>Their Emails (optional)</label>
            <input type="text" name="employer_email" multiple>            
            <label>Phone Number (optional)</label>
            <input type="tel" name="phone">

            <h3>INCIDENT DETAILS</h3>
            <label>Category *</label>
            <select name="category" required>
                <option>Direct Celebration of Death</option>
                <option>Mocking Family/Friends</option>
                <option>Calls for More Violence</option>
                <option>Celebrating Memes</option>
                <option>Threatening Similar Actions</option>
                <option>Other</option>
            </select>
            <label>Platform *</label>
            <select name="platform" required>
                <option>X/Twitter/X</option>
                <option>Facebook</option>
                <option>Instagram</option>
                <option>Tik Tok</option>
                <option>YouTube</option>
                <option>Other</option>
            </select>
            <label>Evidence URL *</label>
            <input type="url" name="evidence_url" required>
            <label>Image URLs (optional, one per line)</label>
            <textarea name="image_urls"></textarea>
            <label>Description *</label>
            <textarea name="description" required></textarea>

            <button type="submit">Submit</button>
        </form>
    </section>
    <script src="/static/script.js"></script>
    <script>
        document.getElementById('report-form').addEventListener('submit', async (event) => {
            event.preventDefault();

            const formData = new FormData(event.target);
            const data = {};
            formData.forEach((value, key) => {
                data[key] = value;
            });

            try {
                const response = await fetch('/submit_report', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data),
                });

                if (response.ok) {
                    window.location.href = '/admin/pending';
                } else {
                    console.error('Submission failed:', await response.text());
                }
            } catch (error) {
                console.error('Error submitting report:', error);
            }
        });
    </script>
</body>
</html>

